{"is_source_file": true, "format": "JavaScript", "description": "This file defines the React context for authentication, including the auth provider component and related hooks. It manages authentication state, roles, and mock vs. real mode handling using Supabase. The file contains logic for deriving primary roles, handling user sessions, and exposing auth-related functions.", "external_files": ["../lib/supabaseClient"], "external_methods": ["getSupabaseClient"], "published": ["useAuth", "AuthProvider"], "classes": [], "methods": [{"name": "useAuth()", "description": "Custom hook to access the AuthContext, throws error if used outside provider.", "scope": "", "scopeKind": ""}, {"name": "AuthProvider({ children })", "description": "React component that provides authentication context to descendants, managing both mock and real modes, user sessions, and roles.", "scope": "", "scopeKind": ""}, {"name": "derivePrimaryRole(meta)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "init()", "scope": "AuthProvider", "scopeKind": "function", "description": "unavailable"}], "calls": ["React.createContext", "useContext", "useEffect", "useMemo", "useState", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "getSupabaseClient", "supabase.auth.getSession", "supabase.auth.onAuthStateChange", "supabase.auth.signOut", "supabase.auth.signInWithPassword", "supabase.auth.signUp"], "search-terms": ["AuthContext.js", "React auth context", "Supabase auth", "mock mode authentication", "role derivation", "AuthProvider component"], "state": 2, "file_id": 13, "knowledge_revision": 81, "git_revision": "92a694eb9cfafa6db12f8446d5953b4f33ce0e2c", "revision_history": [{"28": ""}, {"68": "99f82fa8c33f57e1fbbb4c35435c9c46de7d85d7"}, {"81": "92a694eb9cfafa6db12f8446d5953b4f33ce0e2c"}], "ctags": [{"_type": "tag", "name": "AuthContext", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^const AuthContext = createContext(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "AuthProvider", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^export function AuthProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "DEFAULT_ROLE", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^const DEFAULT_ROLE = \"employee\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ROLE_ORDER", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^const ROLE_ORDER = [\"admin\", \"manager\", \"employee\"];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "derivePrimaryRole", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^function derivePrimaryRole(meta) {$/", "language": "JavaScript", "kind": "function", "signature": "(meta)"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^    async function init() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "AuthProvider", "scopeKind": "function"}, {"_type": "tag", "name": "useAuth", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^export function useAuth() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/weekly-insight-report-platform-22440-22608/web/src/context/AuthContext.js", "pattern": "/^  return <AuthContext.Provider value={value}>{children}<\\/AuthContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}], "hash": "0315e9618d40422de00ece9829a28153", "format-version": 4, "code-base-name": "web", "filename": "web/src/context/AuthContext.js", "fields": [{"name": "return <AuthContext.Provider value={value}>{children}<\\/AuthContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}]}